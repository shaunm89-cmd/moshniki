<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Machine Finder</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.23.0/cytoscape.min.js"></script>
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f3f4f6; }
        .glass-panel { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2); }
        #cy { width: 100%; height: 300px; background-color: #f9fafb; border-radius: 0.5rem; }
        .location-badge { transition: all 0.2s; }
        .location-badge:hover { transform: scale(1.1); background-color: #4f46e5; color: white; }
        
        /* Hide scrollbar for Chrome, Safari and Opera */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        /* Hide scrollbar for IE, Edge and Firefox */
        .no-scrollbar {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
    </style>
</head>
<body class="h-screen flex flex-col overflow-hidden">

    <header class="bg-indigo-900 text-white p-4 shadow-lg flex-none z-10">
        <div class="container mx-auto flex flex-col md:flex-row justify-between items-center">
            <h1 class="text-2xl font-bold flex items-center gap-2">
                <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                Game Machine Finder
            </h1>
            <div class="mt-4 md:mt-0 w-full md:w-1/2 relative">
                <input type="text" id="searchInput" placeholder="Search for a game (e.g., Lucky 88)..." 
                    class="w-full p-3 rounded-lg text-gray-900 focus:outline-none focus:ring-4 focus:ring-indigo-500 shadow-inner">
            </div>
        </div>
    </header>

    <div class="flex flex-1 overflow-hidden">
        
        <div class="w-full md:w-1/3 bg-white border-r border-gray-200 flex flex-col z-0">
            <div class="flex overflow-x-auto p-2 bg-gray-50 border-b border-gray-200 gap-2 no-scrollbar" id="manuTabs">
                <button onclick="filterManu('All')" class="tab-btn px-4 py-1 rounded-full text-sm font-semibold bg-indigo-600 text-white hover:bg-indigo-700 whitespace-nowrap transition-colors">All</button>
                </div>
            
            <div class="p-2 bg-gray-100 text-xs text-gray-500 uppercase font-bold tracking-wider">
                Game Results (<span id="resultCount">0</span>)
            </div>

            <div id="resultsList" class="flex-1 overflow-y-auto p-2 space-y-2">
                <div class="text-center text-gray-400 mt-10">Type a game name to begin...</div>
            </div>
        </div>

        <div class="hidden md:flex w-2/3 bg-gray-50 flex-col relative" id="detailPanel">
            <div class="absolute inset-0 flex items-center justify-center text-gray-300 pointer-events-none" id="emptyState">
                <div class="text-center">
                    <svg class="w-24 h-24 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg>
                    <p class="text-xl font-semibold">Select a game to see details</p>
                </div>
            </div>

            <div id="gameDetails" class="hidden flex-col h-full p-6 overflow-y-auto">
                <div class="glass-panel p-6 rounded-xl shadow-sm mb-6">
                    <div class="flex justify-between items-start">
                        <div>
                            <span id="detailManu" class="text-xs font-bold text-indigo-600 bg-indigo-100 px-2 py-1 rounded uppercase tracking-wide">Aristocrat</span>
                            <h2 id="detailTitle" class="text-4xl font-extrabold text-gray-900 mt-2">Game Title</h2>
                        </div>
                        <div class="bg-green-100 text-green-800 px-4 py-2 rounded-lg font-bold text-center">
                            <span id="detailTotalMachines" class="text-2xl block">0</span>
                            <span class="text-xs uppercase">Machines</span>
                        </div>
                    </div>
                </div>

                <div class="glass-panel p-4 rounded-xl shadow-sm mb-6 flex-none">
                    <h3 class="text-sm font-bold text-gray-500 uppercase mb-2">Location Network Graph</h3>
                    <div id="cy" class="border border-gray-200"></div>
                    <p class="text-xs text-gray-400 mt-2 text-center">Drag nodes to rearrange â€¢ Scroll to zoom</p>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-4" id="cabinetCards">
                    </div>
            </div>
        </div>
    </div>

    <script>
        // --- DATA INJECTION START ---
        const gamesData = [{"name": "5 DRAGONS DELUXE", "manufacturer": "Aristocrat", "cabinets": [{"name": "5 DRAGONS EMPIRE", "locations": ["1072", "5801", "5802", "5803", "5804", "6003", "6006", "7704", "7706"]}, {"name": "5 Dragons Legends", "locations": ["1906"]}, {"name": "PLAYERS CHOICE ALL STARS", "locations": ["7226"]}, {"name": "PLAYERS CHOICE EMERALD EDITION", "locations": ["1073"]}, {"name": "PLAYERS CHOICE RUBY EDITION", "locations": ["1701", "5101", "7210", "7701"]}]}, {"name": "5 DRAGONS HIGH LIMITS", "manufacturer": "Aristocrat", "cabinets": [{"name": "5 DRAGONS EMPIRE", "locations": ["1072", "5801", "5802", "5803", "5804", "6003", "6006", "7704", "7706"]}, {"name": "PLAYERS CHOICE JADE EDITION", "locations": ["1081", "1083", "2907", "7710"]}, {"name": "PLAYERS CHOICE ULTIMATE JACKPOTS", "locations": ["3309"]}]}, {"name": "5 DRAGONS RAPID", "manufacturer": "Aristocrat", "cabinets": [{"name": "5 DRAGONS EMPIRE", "locations": ["1072", "5801", "5802", "5803", "5804", "6003", "6006", "7704", "7706"]}]}, {"name": "5 Dragons", "manufacturer": "Aristocrat", "cabinets": [{"name": "5 DRAGONS EMPIRE", "locations": ["1072", "5801", "5802", "5803", "5804", "6003", "6006", "7704", "7706"]}, {"name": "5 Dragons Legends", "locations": ["1906"]}, {"name": "PLAYERS CHOICE CLASS ACT", "locations": ["2204"]}, {"name": "PLAYERS CHOICE DIAMOND EDITION", "locations": ["1087", "1703", "1907", "3307", "3308", "7223", "7225"]}, {"name": "PLAYERS CHOICE OPAL EDITION", "locations": ["1059", "1702", "6209", "7003", "7705"]}, {"name": "PLAYERS CHOICE SAPPHIRE EDITION", "locations": ["1704", "7224", "7227", "7702", "7703"]}]}, {"name": "5 Dragons Gold", "manufacturer": "Aristocrat", "cabinets": [{"name": "5 DRAGONS EMPIRE", "locations": ["1072", "5801", "5802", "5803", "5804", "6003", "6006", "7704", "7706"]}]}, {"name": "5 KINGS", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE JADE EDITION", "locations": ["1081", "1083", "2907", "7710"]}]}, {"name": "5 KOI", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE ALL STARS", "locations": ["7226"]}]}, {"name": "5 Treasures", "manufacturer": "Scientific Games", "cabinets": [{"name": "MULTIDELUXE", "locations": []}, {"name": "MULTIDELUXE 4", "locations": []}]}, {"name": "50 DRAGONS DELUXE", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE SAPPHIRE EDITION", "locations": ["1704", "7224", "7227", "7702", "7703"]}]}, {"name": "88 Fortunes", "manufacturer": "Scientific Games", "cabinets": [{"name": "MULTIDELUXE", "locations": []}]}, {"name": "Arctic Bear", "manufacturer": "IGT", "cabinets": [{"name": "MULTISTAR CHAMPION SERIES TITANIUM", "locations": ["7219"]}]}, {"name": "Aztec Riches", "manufacturer": "IGT", "cabinets": [{"name": "MULTISTAR BOX FULL OF DOLLARS", "locations": []}]}, {"name": "BIG RED", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE DIAMOND EDITION", "locations": ["1087", "1703", "1907", "3307", "3308", "7223", "7225"]}, {"name": "PLAYERS CHOICE EMERALD EDITION", "locations": ["1073"]}, {"name": "PLAYERS CHOICE GOLD JACKPOTS", "locations": ["1091"]}, {"name": "PLAYERS CHOICE GRAND", "locations": ["3306"]}, {"name": "PLAYERS CHOICE HIGH LIMITS", "locations": ["3310"]}, {"name": "PLAYERS CHOICE HITS", "locations": []}, {"name": "PLAYERS CHOICE OPAL EDITION", "locations": ["1059", "1702", "6209", "7003", "7705"]}, {"name": "PLAYERS CHOICE RUBY EDITION", "locations": ["1701", "5101", "7210", "7701"]}, {"name": "PLAYERS CHOICE ULTIMATE JACKPOTS", "locations": ["3309"]}]}, {"name": "BIG RED DELUXE", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE PEARL EDITION", "locations": ["1095"]}, {"name": "PLAYERS CHOICE PLATINUM EDITION", "locations": []}, {"name": "PLAYERS CHOICE SAPPHIRE EDITION", "locations": ["1704", "7224", "7227", "7702", "7703"]}]}, {"name": "BIG RED STRIKE", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE OPAL EDITION", "locations": ["1059", "1702", "6209", "7003", "7705"]}]}, {"name": "BLACK PANTHER", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE HIGH LIMITS", "locations": ["3310"]}, {"name": "PLAYERS CHOICE SAPPHIRE EDITION", "locations": ["1704", "7224", "7227", "7702", "7703"]}]}, {"name": "BLACK RHINO", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE ULTIMATE JACKPOTS", "locations": ["3309"]}]}, {"name": "BRAZIL", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE HIGH LIMITS", "locations": ["3310"]}]}, {"name": "BUFFALO DELUXE", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE DIAMOND EDITION", "locations": ["1087", "1703", "1907", "3307", "3308", "7223", "7225"]}, {"name": "PLAYERS CHOICE RUBY EDITION", "locations": ["1701", "5101", "7210", "7701"]}]}, {"name": "BUFFALO GOLD COLLECTION", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE EMERALD EDITION", "locations": ["1073"]}, {"name": "PLAYERS CHOICE OPAL EDITION", "locations": ["1059", "1702", "6209", "7003", "7705"]}]}, {"name": "BUFFALO RUMBLE", "manufacturer": "Ainsworth", "cabinets": [{"name": "MULTI WIN ULTIMATE CHOICE", "locations": []}]}, {"name": "Baccarat", "manufacturer": "Light and Wonder", "cabinets": [{"name": "VEGAS STAR QUARTZ GC16V", "locations": ["1401", "1402", "1403", "1404", "1405", "1406", "1407", "1408", "1409", "1410", "1411"]}, {"name": "VEGAS STAR MULTIGAME", "locations": ["7107", "7108", "7109", "7110", "7111", "7112"]}]}, {"name": "Big Rex", "manufacturer": "Scientific Games", "cabinets": [{"name": "MULTIDELUX GRAND", "locations": []}]}, {"name": "Bingo", "manufacturer": "IGT", "cabinets": [{"name": "MULTISTAR BIG 3 G", "locations": ["1503", "6405"]}]}, {"name": "BlackJack", "manufacturer": "Light and Wonder", "cabinets": [{"name": "VEGAS STAR MULTIGAME WITH BLACKJACK", "locations": ["1061", "1062", "1063", "1064", "1101", "1102", "1103", "1104", "1105"]}]}, {"name": "Blazing Phoenix", "manufacturer": "Light and Wonder", "cabinets": [{"name": "DRAGON UNLEASHED TREASURES", "locations": []}]}, {"name": "Blue Moon", "manufacturer": "IGT", "cabinets": [{"name": "MULTISTAR CHAMPION SERIES PLATINUM", "locations": ["6406"]}]}, {"name": "Blue Moon 2", "manufacturer": "IGT", "cabinets": [{"name": "MIGHTYSTAR JACKPOTS", "locations": []}, {"name": "MULTISTAR CHAMPION SERIES", "locations": ["1086", "6201", "8501"]}]}, {"name": "Blue Moon 2 Ultra Chance", "manufacturer": "IGT", "cabinets": [{"name": "MULTISTAR CHAMPION SERIES ULTRA", "locations": ["1074", "5601", "8205"]}]}, {"name": "CASH BULL", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE OPAL EDITION", "locations": ["1059", "1702", "6209", "7003", "7705"]}]}, {"name": "CASH PANTHER", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE JADE EDITION", "locations": ["1081", "1083", "2907", "7710"]}]}, {"name": "CHOY SON DOA INGOT", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE JADE EDITION", "locations": ["1081", "1083", "2907", "7710"]}]}, {"name": "CHOYS KINGDOM", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE HITS", "locations": []}]}, {"name": "COUGAR MAGIC", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE JADE EDITION", "locations": ["1081", "1083", "2907", "7710"]}]}, {"name": "Chilli Bandit", "manufacturer": "IGT", "cabinets": [{"name": "MULTISTAR LEGENDS NEON EDITION", "locations": []}]}, {"name": "Chinese Odyssey", "manufacturer": "IGT", "cabinets": [{"name": "MULTISTAR WORLD CHAMPION SERIES", "locations": ["7221"]}]}, {"name": "Crown Jewels", "manufacturer": "Ainsworth", "cabinets": [{"name": "MEGA MULTIPLAY 1", "locations": []}]}, {"name": "Crown of Egypt", "manufacturer": "IGT", "cabinets": [{"name": "MULTISTAR CHAMPION SERIES GOLD", "locations": []}]}, {"name": "DOLLAR BEAR", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE CLASS ACT", "locations": ["2204"]}, {"name": "PLAYERS CHOICE DIAMOND EDITION", "locations": ["1087", "1703", "1907", "3307", "3308", "7223", "7225"]}, {"name": "PLAYERS CHOICE HIGH LIMITS", "locations": ["3310"]}]}, {"name": "DOUBLE HAPPINESS", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE GRAND", "locations": ["3306"]}]}, {"name": "DRAGON BUCKS", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE PEARL EDITION", "locations": ["1095"]}]}, {"name": "Dancing Lion", "manufacturer": "IGT", "cabinets": [{"name": "MULTISTAR CHAMPION SERIES GOLD", "locations": []}]}, {"name": "Dangerous Beauty 2", "manufacturer": "IGT", "cabinets": [{"name": "MIGHTYSTAR JACKPOTS", "locations": []}]}, {"name": "Desert Ram", "manufacturer": "Scientific Games", "cabinets": [{"name": "MULTIDELUX GRAND", "locations": []}]}, {"name": "Diamond Eternity", "manufacturer": "Scientific Games", "cabinets": [{"name": "MULTIDELUXE", "locations": []}]}, {"name": "Double Dragons", "manufacturer": "Ainsworth", "cabinets": [{"name": "DS KING SPIN", "locations": []}]}, {"name": "Dragon Master", "manufacturer": "IGT", "cabinets": [{"name": "MULTISTAR CHAMPION SERIES", "locations": ["1086", "6201", "8501"]}, {"name": "MULTISTAR CHAMPION SERIES PLATINUM", "locations": ["6406"]}, {"name": "MULTISTAR CHAMPION SERIES ULTRA", "locations": ["1074", "5601", "8205"]}]}, {"name": "Dragon Sphere", "manufacturer": "IGT", "cabinets": [{"name": "MULTISTAR BIG 3 G", "locations": ["1503", "6405"]}]}, {"name": "Dragon Temple", "manufacturer": "IGT", "cabinets": [{"name": "MULTISTAR WORLD CHAMPION SERIES", "locations": ["7221"]}]}, {"name": "Dragon8's", "manufacturer": "Ainsworth", "cabinets": [{"name": "MEGA MULTIPLAY 1", "locations": []}]}, {"name": "Eagle Bucks", "manufacturer": "Ainsworth", "cabinets": [{"name": "MULTIPLAY BIG TIME 8", "locations": ["3403"]}]}, {"name": "Eastern Empress", "manufacturer": "IGT", "cabinets": [{"name": "MULTISTAR LEGENDS NEON EDITION", "locations": []}]}, {"name": "Empress of the East", "manufacturer": "IGT", "cabinets": [{"name": "MULTISTAR DAZZLING DIAMONDS", "locations": ["7220"]}]}, {"name": "Enchanted Eyes", "manufacturer": "Ainsworth", "cabinets": [{"name": "BIG HIT BONANZA JACKPOTS", "locations": []}]}, {"name": "Extra Chance Sydney", "manufacturer": "IGT", "cabinets": [{"name": "JETSETTER FIRST CLASS SYDNEY", "locations": ["6404"]}]}, {"name": "FORTUNE KING DELUXE", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE SAPPHIRE EDITION", "locations": ["1704", "7224", "7227", "7702", "7703"]}]}, {"name": "FORTUNE KING GOLD", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE PEARL EDITION", "locations": ["1095"]}]}, {"name": "FORTUNES OF THE NILE", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE PEARL EDITION", "locations": ["1095"]}]}, {"name": "FORTUNES WAY", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE OPAL EDITION", "locations": ["1059", "1702", "6209", "7003", "7705"]}]}, {"name": "First Class Sydney", "manufacturer": "IGT", "cabinets": [{"name": "JETSETTER FIRST CLASS SYDNEY", "locations": ["6404"]}]}, {"name": "Flower Riches", "manufacturer": "Scientific Games", "cabinets": [{"name": "MULTIDELUXE 4", "locations": []}]}, {"name": "Flying Dragon", "manufacturer": "Ainsworth", "cabinets": [{"name": "MULTI WIN ULTIMATE CHOICE", "locations": []}]}, {"name": "Forbidden City", "manufacturer": "IGT", "cabinets": [{"name": "MULTISTAR LEGENDS NEON EDITION", "locations": []}]}, {"name": "Fortune Beast", "manufacturer": "IGT", "cabinets": [{"name": "MULTISTAR WORLD CHAMPION SERIES", "locations": ["7221"]}]}, {"name": "Fortune Fountain", "manufacturer": "Ainsworth", "cabinets": [{"name": "DS CLASSICS", "locations": []}]}, {"name": "Fortune Ox", "manufacturer": "Ainsworth", "cabinets": [{"name": "DS CLASSICS", "locations": []}]}, {"name": "Fortune Rider", "manufacturer": "IGT", "cabinets": [{"name": "MULTISTAR CHAMPION SERIES TITANIUM", "locations": ["7219"]}]}, {"name": "GRAND STAR", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE HITS", "locations": []}]}, {"name": "Go West", "manufacturer": "Konami", "cabinets": [{"name": "ALL ABOARD EXPRESS 2", "locations": []}]}, {"name": "Goddess of Gold", "manufacturer": "IGT", "cabinets": [{"name": "MIGHTYSTAR JACKPOTS", "locations": []}, {"name": "MULTISTAR DAZZLING DIAMONDS", "locations": ["7220"]}]}, {"name": "Golden Jungle", "manufacturer": "IGT", "cabinets": [{"name": "MULTISTAR BIG 3 G", "locations": ["1503", "6405"]}]}, {"name": "Golden Worrior", "manufacturer": "IGT", "cabinets": [{"name": "MULTISTAR CHAMPION SERIES TITANIUM", "locations": ["7219"]}]}, {"name": "Golden relics", "manufacturer": "Scientific Games", "cabinets": [{"name": "MULTIDELUXE 4", "locations": []}]}, {"name": "Heavy Champion", "manufacturer": "IGT", "cabinets": [{"name": "MULTISTAR CHAMPION SERIES", "locations": ["1086", "6201", "8501"]}, {"name": "MULTISTAR CHAMPION SERIES ULTRA", "locations": ["1074", "5601", "8205"]}]}, {"name": "Heavy Champion 2", "manufacturer": "IGT", "cabinets": [{"name": "MULTISTAR CHAMPION SERIES PLATINUM", "locations": ["6406"]}, {"name": "MULTISTAR LEGENDS NEON EDITION", "locations": []}]}, {"name": "INDIAN DREAMING", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE EMERALD EDITION", "locations": ["1073"]}]}, {"name": "Imperial Fortunes", "manufacturer": "Scientific Games", "cabinets": [{"name": "MULTIDELUXE 4", "locations": []}]}, {"name": "Jewel of Arabia", "manufacturer": "IGT", "cabinets": [{"name": "MULTISTAR CHAMPION SERIES TITANIUM", "locations": ["7219"]}]}, {"name": "King of the Castle", "manufacturer": "IGT", "cabinets": [{"name": "MULTISTAR BOX FULL OF DOLLARS", "locations": []}, {"name": "MULTISTAR CHAMPION SERIES PLATINUM", "locations": ["6406"]}]}, {"name": "King of the Castle 2", "manufacturer": "IGT", "cabinets": [{"name": "MULTISTAR CHAMPION SERIES GOLD", "locations": []}]}, {"name": "Knights Unite", "manufacturer": "IGT", "cabinets": [{"name": "MIGHTYSTAR JACKPOTS", "locations": []}]}, {"name": "LUCKY 88", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE ALL STARS", "locations": ["7226"]}, {"name": "PLAYERS CHOICE CLASS ACT", "locations": ["2204"]}, {"name": "PLAYERS CHOICE DIAMOND EDITION", "locations": ["1087", "1703", "1907", "3307", "3308", "7223", "7225"]}, {"name": "PLAYERS CHOICE JADE EDITION", "locations": ["1081", "1083", "2907", "7710"]}, {"name": "PLAYERS CHOICE ULTIMATE JACKPOTS", "locations": ["3309"]}]}, {"name": "LUCKY PIG", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE GOLD JACKPOTS", "locations": ["1091"]}]}, {"name": "Lantern Riches", "manufacturer": "IGT", "cabinets": [{"name": "MULTISTAR WORLD CHAMPION SERIES", "locations": ["7221"]}]}, {"name": "Las  Vegas", "manufacturer": "IGT", "cabinets": [{"name": "MULTISTAR JETSETTER", "locations": ["1085"]}]}, {"name": "Lucky Bean", "manufacturer": "IGT", "cabinets": [{"name": "MIGHTYSTAR JACKPOTS", "locations": []}]}, {"name": "MISS KITTY GOLD", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE OPAL EDITION", "locations": ["1059", "1702", "6209", "7003", "7705"]}]}, {"name": "MORE CHILLI", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE EMERALD EDITION", "locations": ["1073"]}, {"name": "PLAYERS CHOICE GRAND", "locations": ["3306"]}]}, {"name": "MORE HEARTS", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE ALL STARS", "locations": ["7226"]}, {"name": "PLAYERS CHOICE PEARL EDITION", "locations": ["1095"]}]}, {"name": "Magic Dreams", "manufacturer": "Ainsworth", "cabinets": [{"name": "MEGA MULTIPLAY 1", "locations": []}]}, {"name": "Magically Wild", "manufacturer": "IGT", "cabinets": [{"name": "MIGHTYSTAR JACKPOTS", "locations": []}]}, {"name": "Main Event", "manufacturer": "Scientific Games", "cabinets": [{"name": "MULTIDELUX GRAND", "locations": []}]}, {"name": "Major money The Outback Adventure", "manufacturer": "IGT", "cabinets": [{"name": "MIGHTYSTAR JACKPOTS", "locations": []}, {"name": "MULTISTAR CHAMPION SERIES GOLD", "locations": []}]}, {"name": "Mayan Spirit", "manufacturer": "IGT", "cabinets": [{"name": "MULTISTAR CHAMPION SERIES", "locations": ["1086", "6201", "8501"]}, {"name": "MULTISTAR CHAMPION SERIES ULTRA", "locations": ["1074", "5601", "8205"]}]}, {"name": "Mighty Dragon", "manufacturer": "IGT", "cabinets": [{"name": "MULTISTAR CHAMPION SERIES", "locations": ["1086", "6201", "8501"]}, {"name": "MULTISTAR CHAMPION SERIES ULTRA", "locations": ["1074", "5601", "8205"]}]}, {"name": "Money Heat", "manufacturer": "Ainsworth", "cabinets": [{"name": "MULTIPLAY BIG TIME 8", "locations": ["3403"]}]}, {"name": "Mustang Money", "manufacturer": "Ainsworth", "cabinets": [{"name": "MULTIPLAY BIG TIME 8", "locations": ["3403"]}]}, {"name": "Mystic Jaguar", "manufacturer": "IGT", "cabinets": [{"name": "MULTISTAR WORLD CHAMPION SERIES", "locations": ["7221"]}]}, {"name": "Mystic Moon", "manufacturer": "Ainsworth", "cabinets": [{"name": "BIG HIT BONANZA JACKPOTS", "locations": []}]}, {"name": "Mystical East", "manufacturer": "IGT", "cabinets": [{"name": "MULTISTAR DAZZLING DIAMONDS", "locations": ["7220"]}]}, {"name": "Navaho legend", "manufacturer": "IGT", "cabinets": [{"name": "MIGHTYSTAR JACKPOTS", "locations": []}, {"name": "MULTISTAR CHAMPION SERIES GOLD", "locations": []}, {"name": "MULTISTAR CHAMPION SERIES PLATINUM", "locations": ["6406"]}]}, {"name": "Ninja 3", "manufacturer": "Scientific Games", "cabinets": [{"name": "MULTIDELUXE 4", "locations": []}]}, {"name": "PANTHER MAGIC", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE GRAND", "locations": ["3306"]}]}, {"name": "PROSPERITY DRAGON", "manufacturer": "Ainsworth", "cabinets": [{"name": "MULTI WIN ULTIMATE CHOICE", "locations": []}]}, {"name": "Panda Fortune", "manufacturer": "Ainsworth", "cabinets": [{"name": "BIG HIT BONANZA JACKPOTS", "locations": []}]}, {"name": "Paris", "manufacturer": "IGT", "cabinets": [{"name": "MULTISTAR JETSETTER", "locations": ["1085"]}]}, {"name": "Peking Panda", "manufacturer": "Ainsworth", "cabinets": [{"name": "DS CLASSICS", "locations": []}]}, {"name": "QUEEN OF THE NILE", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE OPAL EDITION", "locations": ["1059", "1702", "6209", "7003", "7705"]}]}, {"name": "RETURN OF THE SAMURAI", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE EMERALD EDITION", "locations": ["1073"]}, {"name": "PLAYERS CHOICE PLATINUM EDITION", "locations": []}]}, {"name": "Red Fleet", "manufacturer": "Light and Wonder", "cabinets": [{"name": "DRAGON UNLEASHED TREASURES", "locations": []}]}, {"name": "Red Sands", "manufacturer": "IGT", "cabinets": [{"name": "MULTISTAR DAZZLING DIAMONDS", "locations": ["7220"]}]}, {"name": "Rise of the Emperor", "manufacturer": "Scientific Games", "cabinets": [{"name": "MULTIDELUX GRAND", "locations": []}]}, {"name": "Roaming Wolf", "manufacturer": "IGT", "cabinets": [{"name": "MULTISTAR DAZZLING DIAMONDS", "locations": ["7220"]}]}, {"name": "Roulette $1", "manufacturer": "Light and Wonder", "cabinets": [{"name": "VEGAS STAR MULTIGAME WITH BLACKJACK", "locations": ["1061", "1062", "1063", "1064", "1101", "1102", "1103", "1104", "1105"]}, {"name": "VEGAS STAR QUARTZ GC16V", "locations": ["1401", "1402", "1403", "1404", "1405", "1406", "1407", "1408", "1409", "1410", "1411"]}, {"name": "VEGAS STAR MULTIGAME", "locations": ["7107", "7108", "7109", "7110", "7111", "7112"]}]}, {"name": "Roulette 50c", "manufacturer": "Light and Wonder", "cabinets": [{"name": "VEGAS STAR MULTIGAME", "locations": ["7107", "7108", "7109", "7110", "7111", "7112"]}]}, {"name": "Roulette X", "manufacturer": "Light and Wonder", "cabinets": [{"name": "VEGAS STAR QUARTZ GC16V", "locations": ["1401", "1402", "1403", "1404", "1405", "1406", "1407", "1408", "1409", "1410", "1411"]}]}, {"name": "Royal Diamonds", "manufacturer": "Ainsworth", "cabinets": [{"name": "DS CLASSICS", "locations": []}, {"name": "DS KING SPIN", "locations": []}]}, {"name": "SCORCHIN FORTUNE QUEEN OF THE NILE", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE HITS", "locations": []}]}, {"name": "SKY HEROES", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE PEARL EDITION", "locations": ["1095"]}]}, {"name": "SPARKLING ROYAL", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE GOLD JACKPOTS", "locations": ["1091"]}]}, {"name": "SPRING CARNIVAL", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE PLATINUM EDITION", "locations": []}]}, {"name": "STORM 7'S STACKS", "manufacturer": "Ainsworth", "cabinets": [{"name": "MULTI WIN ULTIMATE CHOICE", "locations": []}]}, {"name": "SUPER BUCKS IV", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE DIAMOND EDITION", "locations": ["1087", "1703", "1907", "3307", "3308", "7223", "7225"]}]}, {"name": "SWEET HEARTS II", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE ULTIMATE JACKPOTS", "locations": ["3309"]}]}, {"name": "SWEET HEARTS III", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE EMERALD EDITION", "locations": ["1073"]}]}, {"name": "Sahara Sunset", "manufacturer": "Konami", "cabinets": [{"name": "ALL ABOARD EXPRESS 2", "locations": []}]}, {"name": "Scarab", "manufacturer": "IGT", "cabinets": [{"name": "MULTISTAR LEGENDS NEON EDITION", "locations": []}]}, {"name": "Shogun", "manufacturer": "IGT", "cabinets": [{"name": "MULTISTAR BOX FULL OF DOLLARS", "locations": []}, {"name": "MULTISTAR CHAMPION SERIES TITANIUM", "locations": ["7219"]}, {"name": "MULTISTAR WORLD CHAMPION SERIES", "locations": ["7221"]}]}, {"name": "Sicbo", "manufacturer": "Light and Wonder", "cabinets": [{"name": "VEGAS STAR MULTIGAME", "locations": ["7107", "7108", "7109", "7110", "7111", "7112"]}]}, {"name": "Soaring Spirit", "manufacturer": "IGT", "cabinets": [{"name": "MULTISTAR CHAMPION SERIES TITANIUM", "locations": ["7219"]}]}, {"name": "Solid Gold", "manufacturer": "Ainsworth", "cabinets": [{"name": "DS CLASSICS", "locations": []}]}, {"name": "Stadium BlackJack", "manufacturer": "Light and Wonder", "cabinets": [{"name": "VEGAS STAR QUARTZ GC16V", "locations": ["1401", "1402", "1403", "1404", "1405", "1406", "1407", "1408", "1409", "1410", "1411"]}]}, {"name": "Sydney", "manufacturer": "IGT", "cabinets": [{"name": "JETSETTER FIRST CLASS SYDNEY", "locations": ["6404"]}, {"name": "MULTISTAR JETSETTER", "locations": ["1085"]}]}, {"name": "THE BULLFIGHTER", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE GOLD JACKPOTS", "locations": ["1091"]}, {"name": "PLAYERS CHOICE HITS", "locations": []}, {"name": "PLAYERS CHOICE ULTIMATE JACKPOTS", "locations": ["3309"]}]}, {"name": "TIMBER WOLF DELUXE", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE SAPPHIRE EDITION", "locations": ["1704", "7224", "7227", "7702", "7703"]}]}, {"name": "TOP BANANA", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE CLASS ACT", "locations": ["2204"]}]}, {"name": "Taipan", "manufacturer": "IGT", "cabinets": [{"name": "MULTISTAR CHAMPION SERIES GOLD", "locations": []}, {"name": "MULTISTAR CHAMPION SERIES PLATINUM", "locations": ["6406"]}]}, {"name": "Thai Treasures", "manufacturer": "Konami", "cabinets": [{"name": "ALL ABOARD EXPRESS 2", "locations": []}]}, {"name": "Treasured Happiness", "manufacturer": "Light and Wonder", "cabinets": [{"name": "DRAGON UNLEASHED TREASURES", "locations": []}]}, {"name": "Turtle Bay", "manufacturer": "IGT", "cabinets": [{"name": "MIGHTYSTAR JACKPOTS", "locations": []}]}, {"name": "Vegas Delights", "manufacturer": "Ainsworth", "cabinets": [{"name": "BIG HIT BONANZA JACKPOTS", "locations": []}]}, {"name": "WELCOME TO FANTASTIC JACKPOTS HITS", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE HITS", "locations": []}]}, {"name": "WHALES OF CASH", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE JADE EDITION", "locations": ["1081", "1083", "2907", "7710"]}]}, {"name": "WHERE'S THE GOLD", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE PLATINUM EDITION", "locations": []}, {"name": "PLAYERS CHOICE RUBY EDITION", "locations": ["1701", "5101", "7210", "7701"]}]}, {"name": "WHITE TIGER", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE GOLD JACKPOTS", "locations": ["1091"]}]}, {"name": "WILD  THING", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE RUBY EDITION", "locations": ["1701", "5101", "7210", "7701"]}]}, {"name": "WILD FIESTA COINS", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE OPAL EDITION", "locations": ["1059", "1702", "6209", "7003", "7705"]}]}, {"name": "WILD STALLION", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE EMERALD EDITION", "locations": ["1073"]}, {"name": "PLAYERS CHOICE GOLD JACKPOTS", "locations": ["1091"]}, {"name": "PLAYERS CHOICE HIGH LIMITS", "locations": ["3310"]}, {"name": "PLAYERS CHOICE RUBY EDITION", "locations": ["1701", "5101", "7210", "7701"]}]}, {"name": "WILD WARRIORS", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE CLASS ACT", "locations": ["2204"]}, {"name": "PLAYERS CHOICE EMERALD EDITION", "locations": ["1073"]}]}, {"name": "WILD WAYS", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE DIAMOND EDITION", "locations": ["1087", "1703", "1907", "3307", "3308", "7223", "7225"]}]}, {"name": "WINGS OF FIRE", "manufacturer": "Ainsworth", "cabinets": [{"name": "MULTI WIN ULTIMATE CHOICE", "locations": []}]}, {"name": "WOLF MOON", "manufacturer": "Aristocrat", "cabinets": [{"name": "PLAYERS CHOICE SAPPHIRE EDITION", "locations": ["1704", "7224", "7227", "7702", "7703"]}]}, {"name": "Wings of Fortune", "manufacturer": "Ainsworth", "cabinets": [{"name": "MEGA MULTIPLAY 1", "locations": []}]}, {"name": "Wolf Chief", "manufacturer": "Ainsworth", "cabinets": [{"name": "MULTIPLAY BIG TIME 8", "locations": ["3403"]}]}, {"name": "Wolf Run", "manufacturer": "IGT", "cabinets": [{"name": "MULTISTAR CHAMPION SERIES GOLD", "locations": []}]}, {"name": "Year of the Snake", "manufacturer": "Ainsworth", "cabinets": [{"name": "DS KING SPIN", "locations": []}]}, {"name": "Year of the Tiger", "manufacturer": "Ainsworth", "cabinets": [{"name": "DS KING SPIN", "locations": []}]}];
        const manufacturers = ["Ainsworth", "Aristocrat", "IGT", "Konami", "Light and Wonder", "Scientific Games"];
        // --- DATA INJECTION END ---

        let currentFilter = 'All';

        document.addEventListener('DOMContentLoaded', () => {
            populateManuTabs();
            renderList(gamesData);
            
            // Search Listener
            document.getElementById('searchInput').addEventListener('input', (e) => {
                handleSearch(e.target.value);
            });
        });

        function populateManuTabs() {
            const container = document.getElementById('manuTabs');
            manufacturers.forEach(m => {
                const btn = document.createElement('button');
                btn.className = 'tab-btn px-4 py-1 rounded-full text-sm font-semibold bg-white text-gray-600 border border-gray-200 hover:bg-gray-100 whitespace-nowrap transition-colors';
                btn.innerText = m;
                btn.onclick = () => filterManu(m, btn);
                container.appendChild(btn);
            });
        }

        function filterManu(manu, btnElement) {
            currentFilter = manu;
            
            // Update UI tabs
            document.querySelectorAll('.tab-btn').forEach(b => {
                b.className = 'tab-btn px-4 py-1 rounded-full text-sm font-semibold bg-white text-gray-600 border border-gray-200 hover:bg-gray-100 whitespace-nowrap transition-colors';
            });
            if(btnElement) {
                btnElement.className = 'tab-btn px-4 py-1 rounded-full text-sm font-semibold bg-indigo-600 text-white hover:bg-indigo-700 whitespace-nowrap transition-colors';
            } else {
                // Default All
                document.querySelector('.tab-btn').className = 'tab-btn px-4 py-1 rounded-full text-sm font-semibold bg-indigo-600 text-white hover:bg-indigo-700 whitespace-nowrap transition-colors';
            }

            handleSearch(document.getElementById('searchInput').value);
        }

        function handleSearch(query) {
            const lowerQ = query.toLowerCase();
            const filtered = gamesData.filter(g => {
                const matchesSearch = g.name.toLowerCase().includes(lowerQ);
                const matchesManu = currentFilter === 'All' || g.manufacturer === currentFilter;
                return matchesSearch && matchesManu;
            });
            renderList(filtered);
        }

        function renderList(games) {
            const list = document.getElementById('resultsList');
            document.getElementById('resultCount').innerText = games.length;
            list.innerHTML = '';

            if(games.length === 0) {
                list.innerHTML = '<div class="p-4 text-center text-gray-400">No games found.</div>';
                return;
            }

            games.forEach(g => {
                const item = document.createElement('div');
                item.className = 'p-3 rounded-lg hover:bg-indigo-50 cursor-pointer border border-transparent hover:border-indigo-100 group transition-all';
                // Calculate total machines
                const totalLocs = g.cabinets.reduce((acc, cab) => acc + cab.locations.length, 0);
                
                item.innerHTML = `
                    <div class="flex justify-between items-center">
                        <div class="font-bold text-gray-800 group-hover:text-indigo-700">${g.name}</div>
                        ${totalLocs > 0 ? `<span class="bg-green-100 text-green-700 text-xs px-2 py-1 rounded-full font-bold">${totalLocs}</span>` : ''}
                    </div>
                    <div class="text-xs text-gray-400 mt-1">${g.manufacturer}</div>
                `;
                item.onclick = () => showDetails(g);
                list.appendChild(item);
            });
        }

        let cy = null;

        function showDetails(game) {
            document.getElementById('emptyState').classList.add('hidden');
            const details = document.getElementById('gameDetails');
            details.classList.remove('hidden');
            details.classList.add('flex');

            // Populate Text
            document.getElementById('detailManu').innerText = game.manufacturer;
            document.getElementById('detailTitle').innerText = game.name;
            
            const totalMachines = game.cabinets.reduce((acc, c) => acc + c.locations.length, 0);
            document.getElementById('detailTotalMachines').innerText = totalMachines;

            // Populate Cards
            const cardContainer = document.getElementById('cabinetCards');
            cardContainer.innerHTML = '';

            game.cabinets.forEach(cab => {
                const card = document.createElement('div');
                card.className = 'bg-white p-4 rounded-xl shadow-sm border border-gray-100';
                
                let locationTags = '';
                if (cab.locations.length > 0) {
                    locationTags = cab.locations.map(l => `<span class="location-badge inline-block bg-gray-100 text-gray-700 px-2 py-1 rounded text-sm font-mono font-bold mr-1 mb-1 border border-gray-200 cursor-default">${l}</span>`).join('');
                } else {
                    locationTags = '<span class="text-red-400 text-sm italic">Not currently on floor</span>';
                }

                card.innerHTML = `
                    <div class="flex items-center gap-3 mb-3 border-b border-gray-100 pb-2">
                        <div class="w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-bold">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg>
                        </div>
                        <h4 class="font-bold text-gray-800 text-sm">${cab.name}</h4>
                    </div>
                    <div>
                        ${locationTags}
                    </div>
                `;
                cardContainer.appendChild(card);
            });

            // RENDER GRAPH
            renderGraph(game);
        }

        function renderGraph(game) {
            // Build Elements
            const elements = [];
            
            // Root Node (Game)
            elements.push({ data: { id: 'game', label: game.name, color: '#f59e0b', size: 60 } });

            game.cabinets.forEach((cab, i) => {
                const cabId = 'cab_' + i;
                // Cabinet Node
                elements.push({ data: { id: cabId, label: cab.name, color: '#3b82f6', size: 40 } });
                // Edge Game -> Cab
                elements.push({ data: { source: 'game', target: cabId } });

                // Machine Nodes
                cab.locations.forEach((loc, j) => {
                    const locId = 'loc_' + i + '_' + j;
                    elements.push({ data: { id: locId, label: '#' + loc, color: '#10b981', size: 30 } });
                    elements.push({ data: { source: cabId, target: locId } });
                });
            });

            if(cy) cy.destroy();

            cy = cytoscape({
                container: document.getElementById('cy'),
                elements: elements,
                style: [
                    {
                        selector: 'node',
                        style: {
                            'background-color': 'data(color)',
                            'label': 'data(label)',
                            'width': 'data(size)',
                            'height': 'data(size)',
                            'color': '#333',
                            'font-size': '10px',
                            'font-weight': 'bold',
                            'text-valign': 'center',
                            'text-halign': 'center',
                            'text-outline-color': '#fff',
                            'text-outline-width': 2
                        }
                    },
                    {
                        selector: 'edge',
                        style: {
                            'width': 2,
                            'line-color': '#cbd5e1',
                            'target-arrow-color': '#cbd5e1',
                            'target-arrow-shape': 'triangle',
                            'curve-style': 'bezier'
                        }
                    }
                ],
                layout: {
                    name: 'cose',
                    animate: true,
                    padding: 30
                }
            });
        }
    </script>
</body>
</html>
