<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THE EYE | Surveillance Ops</title>
    <style>
        :root {
            --bg: #050505;
            --screen-bg: #0a150a;
            --screen-off: #111;
            --text-main: #66ff66; /* Terminal Green */
            --alert: #ff3333;
            --scan-line: rgba(102, 255, 102, 0.1);
            --font: 'Courier New', monospace;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: var(--font); user-select: none; }

        body {
            background-color: var(--bg);
            color: var(--text-main);
            height: 100vh;
            display: flex;
            overflow: hidden;
        }

        /* --- SIDEBAR (Upgrades) --- */
        .sidebar {
            width: 350px;
            border-right: 2px solid #333;
            padding: 20px;
            display: flex;
            flex-direction: column;
            background: #020202;
            z-index: 10;
        }

        h1 { text-transform: uppercase; letter-spacing: 2px; margin-bottom: 20px; border-bottom: 1px solid var(--text-main); padding-bottom: 10px; font-size: 1.5rem; text-shadow: 0 0 10px var(--text-main); }

        .stats-box {
            margin-bottom: 30px;
            padding: 15px;
            border: 1px solid #333;
            background: #0a0a0a;
        }

        .stat-row { display: flex; justify-content: space-between; margin-bottom: 5px; font-size: 1.1rem; }
        .stat-val { font-weight: bold; }

        .upgrades-list { flex: 1; overflow-y: auto; padding-right: 5px; }

        .upgrade-btn {
            background: #111;
            border: 1px solid #444;
            color: #888;
            padding: 15px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: 0.2s;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .upgrade-btn:hover { background: #222; }
        .upgrade-btn.affordable { border-color: var(--text-main); color: var(--text-main); background: rgba(0, 255, 0, 0.05); }
        .upgrade-btn.affordable:hover { background: var(--text-main); color: black; }
        
        .btn-info { display: flex; flex-direction: column; align-items: flex-start; }
        .btn-name { font-weight: bold; font-size: 0.9rem; }
        .btn-cost { font-size: 0.8rem; }

        /* --- MAIN CCTV WALL --- */
        .monitor-wall {
            flex: 1;
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr;
            gap: 10px;
            padding: 20px;
            background: #111;
            position: relative;
        }

        .cctv-screen {
            background: var(--screen-bg);
            border: 2px solid #333;
            position: relative;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: crosshair;
            transition: border-color 0.2s;
        }

        .cctv-screen::before {
            content: "CAM-" attr(data-id);
            position: absolute;
            top: 10px; left: 10px;
            font-size: 0.8rem;
            opacity: 0.7;
            z-index: 2;
        }

        /* Scanline Effect */
        .cctv-screen::after {
            content: " ";
            display: block;
            position: absolute;
            top: 0; left: 0; bottom: 0; right: 0;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            z-index: 2;
            background-size: 100% 2px, 3px 100%;
            pointer-events: none;
        }

        /* Active Incident Style */
        .cctv-screen.alert {
            border-color: var(--alert);
            animation: flashBorder 1s infinite;
        }
        
        .cctv-screen.alert .target {
            display: block;
        }

        @keyframes flashBorder { 0% { border-color: var(--alert); } 50% { border-color: #333; } 100% { border-color: var(--alert); } }

        /* The "Target" icon */
        .target {
            display: none;
            width: 80px; height: 80px;
            border: 2px dashed var(--alert);
            border-radius: 50%;
            position: relative;
            animation: spin 4s linear infinite;
            z-index: 5;
        }
        
        .target-label {
            position: absolute;
            bottom: -25px; left: 50%; transform: translateX(-50%);
            background: var(--alert); color: black;
            font-size: 0.7rem; padding: 2px 5px;
            white-space: nowrap; font-weight: bold;
        }

        @keyframes spin { 100% { transform: rotate(360deg); } }

        /* Floating Text Effect */
        .floating-text {
            position: absolute;
            color: white;
            font-weight: bold;
            pointer-events: none;
            animation: floatUp 1s forwards;
            z-index: 100;
        }
        @keyframes floatUp { to { transform: translateY(-50px); opacity: 0; } }

        /* CRT FLICKER OVERLAY */
        .crt-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.1);
            pointer-events: none;
            z-index: 99;
            animation: flicker 0.15s infinite;
            opacity: 0.05;
        }
        @keyframes flicker { 0% { opacity: 0.02; } 50% { opacity: 0.05; } 100% { opacity: 0.02; } }

    </style>
</head>
<body>

    <div class="crt-overlay"></div>

    <div class="sidebar">
        <h1>THE EYE <span style="font-size:0.5em; vertical-align:middle">v.0.9</span></h1>
        
        <div class="stats-box">
            <div class="stat-row">
                <span>INTEL:</span>
                <span class="stat-val" id="score">0</span>
            </div>
            <div class="stat-row" style="font-size: 0.8rem; color: #888; margin-top:5px;">
                <span>Auto-Resolve:</span>
                <span id="dps">0</span>/sec
            </div>
        </div>

        <div style="margin-bottom:10px; font-size:0.8rem; color:#888;">SYSTEM UPGRADES</div>
        <div class="upgrades-list" id="upgrade-container">
            </div>

        <div style="margin-top:auto; padding-top:20px; border-top:1px solid #333; font-size:0.7rem; color:#444;">
            Warning: Unauthorized access to surveillance grid is a federal offense. <br> Session ID: #884-X
        </div>
    </div>

    <div class="monitor-wall" id="wall">
        <div class="cctv-screen" id="cam1" data-id="01" onclick="resolveIncident(1)">
            <div class="target"><div class="target-label">SUSPECT</div></div>
        </div>
        <div class="cctv-screen" id="cam2" data-id="02" onclick="resolveIncident(2)">
            <div class="target"><div class="target-label">SUSPECT</div></div>
        </div>
        <div class="cctv-screen" id="cam3" data-id="03" onclick="resolveIncident(3)">
            <div class="target"><div class="target-label">SUSPECT</div></div>
        </div>
        <div class="cctv-screen" id="cam4" data-id="04" onclick="resolveIncident(4)">
            <div class="target"><div class="target-label">SUSPECT</div></div>
        </div>
    </div>

    <script>
        // --- GAME STATE ---
        let intel = 0;
        let resolvePower = 10; // How much intel per click
        let autoResolve = 0; // DPS (Intel per second)
        
        // Incident Data
        const incidents = [
            "Counter Detected", "Drunk on Floor", "Fake ID", "AML Alert", 
            "Camera Blocked", "Unattended Bag", "VIP Arrival", "Staff Error"
        ];

        // Active threats on cameras (0 = clear, 1 = threat)
        let camStatus = { 1: false, 2: false, 3: false, 4: false };

        // Upgrades Database
        const upgrades = [
            { id: 1, name: "New Batteries", cost: 50, power: 5, auto: 0, desc: "+5 Intel/Click" },
            { id: 2, name: "Intern Hire", cost: 200, power: 0, auto: 2, desc: "+2 Intel/Sec" },
            { id: 3, name: "HD Sensors", cost: 500, power: 20, auto: 0, desc: "+20 Intel/Click" },
            { id: 4, name: "Facial Rec V1", cost: 1000, power: 0, auto: 15, desc: "+15 Intel/Sec" },
            { id: 5, name: "PTZ Tracking", cost: 3000, power: 50, auto: 0, desc: "+50 Intel/Click" },
            { id: 6, name: "AI Neural Net", cost: 10000, power: 0, auto: 100, desc: "+100 Intel/Sec" }
        ];

        // --- CORE LOOP ---
        
        // 1. Generate Incidents (The "Enemy")
        setInterval(() => {
            // Pick random camera 1-4
            let cam = Math.floor(Math.random() * 4) + 1;
            if(!camStatus[cam]) {
                spawnIncident(cam);
            }
        }, 2000); // New incident every 2 seconds

        // 2. Auto-Resolve (The "Passive Income")
        setInterval(() => {
            if(autoResolve > 0) {
                intel += autoResolve;
                updateUI();
                
                // Visual effect: Randomly clear a screen if AI is strong enough
                // (Simplified: Just adding intel passively for now)
            }
        }, 1000);

        // --- FUNCTIONS ---

        function spawnIncident(camId) {
            camStatus[camId] = true;
            const screen = document.getElementById(`cam${camId}`);
            screen.classList.add('alert');
            
            // Random Label
            const label = screen.querySelector('.target-label');
            label.innerText = incidents[Math.floor(Math.random() * incidents.length)];
        }

        function resolveIncident(camId) {
            if(camStatus[camId]) {
                // Success Click
                camStatus[camId] = false;
                const screen = document.getElementById(`cam${camId}`);
                screen.classList.remove('alert');

                // Reward
                intel += resolvePower;
                
                // Visuals
                spawnFloatingText(event.clientX, event.clientY, `+${resolvePower}`);
                playSound();
                updateUI();
            } else {
                // Clicked on empty screen
                // Maybe penalty? For now just nothing.
            }
        }

        function buyUpgrade(index) {
            const upg = upgrades[index];
            if(intel >= upg.cost) {
                intel -= upg.cost;
                resolvePower += upg.power;
                autoResolve += upg.auto;
                
                // Cost scaling
                upg.cost = Math.floor(upg.cost * 1.5);
                
                updateUI();
                renderUpgrades();
            }
        }

        function spawnFloatingText(x, y, text) {
            const el = document.createElement('div');
            el.className = 'floating-text';
            el.innerText = text;
            el.style.left = x + 'px';
            el.style.top = y + 'px';
            document.body.appendChild(el);
            setTimeout(() => el.remove(), 1000);
        }

        function updateUI() {
            document.getElementById('score').innerText = Math.floor(intel).toLocaleString();
            document.getElementById('dps').innerText = autoResolve;
            
            // Check button affordability
            document.querySelectorAll('.upgrade-btn').forEach((btn, index) => {
                if(intel >= upgrades[index].cost) {
                    btn.classList.add('affordable');
                } else {
                    btn.classList.remove('affordable');
                }
            });
        }

        function renderUpgrades() {
            const container = document.getElementById('upgrade-container');
            container.innerHTML = '';
            
            upgrades.forEach((u, index) => {
                const btn = document.createElement('div');
                btn.className = 'upgrade-btn';
                if(intel >= u.cost) btn.classList.add('affordable');
                
                btn.onclick = () => buyUpgrade(index);
                
                btn.innerHTML = `
                    <div class="btn-info">
                        <span class="btn-name">${u.name}</span>
                        <span class="btn-cost">Cost: ${u.cost.toLocaleString()}</span>
                    </div>
                    <div style="font-size:0.8rem">${u.desc}</div>
                `;
                container.appendChild(btn);
            });
        }

        // Simple Beep Sound
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        function playSound() {
            if(audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.frequency.setValueAtTime(800, audioCtx.currentTime);
            osc.frequency.exponentialRampToValueAtTime(300, audioCtx.currentTime + 0.1);
            gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
            gain.gain.linearRampToValueAtTime(0, audioCtx.currentTime + 0.1);
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            osc.start();
            osc.stop(audioCtx.currentTime + 0.1);
        }

        // Init
        renderUpgrades();

    </script>
</body>
</html>
