<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Neon Particle Physics</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: #000;
            overflow: hidden;
            font-family: 'Segoe UI', sans-serif;
            color: white;
        }
        
        #controls {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 100;
            display: flex;
            flex-direction: column;
            gap: 10px;
            width: 250px;
        }

        input[type="text"] {
            background: rgba(0,0,0,0.5);
            border: 1px solid #444;
            color: #00f2ea;
            padding: 10px;
            font-size: 1.2rem;
            text-transform: uppercase;
            text-align: center;
            outline: none;
            border-radius: 5px;
        }

        button {
            background: linear-gradient(45deg, #00f2ea, #ff0050);
            border: none;
            padding: 10px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            border-radius: 5px;
            transition: 0.2s;
        }

        button:hover { opacity: 0.8; transform: scale(1.02); }

        .slider-group { margin-top: 10px; }
        label { font-size: 0.8rem; color: #ccc; display: flex; justify-content: space-between;}
        input[type="range"] { width: 100%; margin-top: 5px; cursor: pointer; }

        canvas { display: block; }
    </style>
</head>
<body>

    <div id="controls">
        <label>ENTER TEXT</label>
        <input type="text" id="textInput" value="MILA" maxlength="8">
        <button onclick="initParticles()">RENDER</button>
        
        <div class="slider-group">
            <label>Particle Size <span id="val-size">2</span></label>
            <input type="range" min="1" max="5" value="2" id="sizeRange">
        </div>

        <div class="slider-group">
            <label>Explosion Radius <span id="val-rad">60</span></label>
            <input type="range" min="30" max="150" value="60" id="radiusRange">
        </div>
        
        <p style="margin-top:15px; font-size:0.7rem; color:#888; text-align:center;">
            Move your mouse over the text to scatter the particles.
        </p>
    </div>

    <canvas id="canvas1"></canvas>

    <script>
        const canvas = document.getElementById('canvas1');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let particleArray = [];
        let adjustX = 0;
        let adjustY = 0;

        // Mouse interaction object
        const mouse = {
            x: null,
            y: null,
            radius: 60 // The "smash" radius
        }

        // Track mouse movement
        window.addEventListener('mousemove', function(event){
            mouse.x = event.x;
            mouse.y = event.y;
        });
        
        // Reset mouse when leaving window
        window.addEventListener('mouseout', function(){
            mouse.x = undefined;
            mouse.y = undefined;
        });

        // Sliders
        const sizeSlider = document.getElementById('sizeRange');
        const radiusSlider = document.getElementById('radiusRange');

        sizeSlider.addEventListener('input', () => { 
            document.getElementById('val-size').innerText = sizeSlider.value;
            initParticles(); 
        });
        
        radiusSlider.addEventListener('input', () => { 
            mouse.radius = radiusSlider.value;
            document.getElementById('val-rad').innerText = radiusSlider.value;
        });

        // Handle text input
        const textInput = document.getElementById('textInput');
        textInput.addEventListener('keyup', function(e){
            if(e.key === 'Enter') initParticles();
        });

        // PARTICLE CLASS
        class Particle {
            constructor(x, y){
                this.x = x;
                this.y = y;
                this.size = sizeSlider.value;
                this.baseX = this.x; // Remember where I belong
                this.baseY = this.y;
                this.density = (Math.random() * 30) + 1; // How heavy am I?
                
                // Random Neon Colors
                const colors = ['#00f2ea', '#ff0050', '#ffffff', '#bc13fe'];
                this.color = colors[Math.floor(Math.random() * colors.length)];
            }
            
            draw(){
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.closePath();
                ctx.fill();
            }

            update(){
                // Physics Logic
                let dx = mouse.x - this.x;
                let dy = mouse.y - this.y;
                let distance = Math.sqrt(dx * dx + dy * dy);
                let forceDirectionX = dx / distance;
                let forceDirectionY = dy / distance;
                
                // Physics: If mouse is close, push away fast. If far, return home slow.
                let maxDistance = mouse.radius;
                let force = (maxDistance - distance) / maxDistance;
                let directionX = forceDirectionX * force * this.density;
                let directionY = forceDirectionY * force * this.density;

                if (distance < mouse.radius){
                    this.x -= directionX * 5; // Scatter force
                    this.y -= directionY * 5;
                } else {
                    // Return logic
                    if (this.x !== this.baseX){
                        let dx = this.x - this.baseX;
                        this.x -= dx / 10; // Return speed (higher divide = slower)
                    }
                    if (this.y !== this.baseY){
                        let dy = this.y - this.baseY;
                        this.y -= dy / 10;
                    }
                }
            }
        }

        // TEXT RENDERER
        function initParticles(){
            particleArray = [];
            let text = textInput.value;
            if(!text) text = "MILA";
            
            // 1. Draw solid text first
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = 'white';
            
            // Dynamic font size based on text length
            let fontSize = 150;
            if(text.length > 5) fontSize = 100;
            if(text.length > 8) fontSize = 60;

            ctx.font = 'bold ' + fontSize + 'px Verdana';
            ctx.fillText(text, 0, 100); // Draw off-screen initially to scan
            
            // Center calculations
            const textCoordinates = ctx.getImageData(0, 0, canvas.width, 200); // Scan top area
            const width = textCoordinates.width; // canvas width
            const height = textCoordinates.height; // scanned area height

            // Center the text on screen
            adjustX = (canvas.width / 2) - (ctx.measureText(text).width / 2);
            adjustY = (canvas.height / 2) - (fontSize / 2);

            // 2. Scan every pixel to find where the text is
            // We skip pixels (+= 4 or 5) for performance and style
            let density = 4; 
            
            for (let y = 0; y < height; y += density){
                for (let x = 0; x < width; x += density){
                    // Check alpha value of pixel (4th value in array)
                    // If alpha > 128 (approx 50%), it's part of the text
                    if (textCoordinates.data[(y * 4 * textCoordinates.width) + (x * 4) + 3] > 128){
                        let positionX = x + adjustX;
                        let positionY = y + adjustY;
                        particleArray.push(new Particle(positionX, positionY));
                    }
                }
            }
        }

        // ANIMATION LOOP
        function animate(){
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Connect particles with lines if they are close (optional cool effect)
            // connect(); 
            
            for (let i = 0; i < particleArray.length; i++){
                particleArray[i].draw();
                particleArray[i].update();
            }
            requestAnimationFrame(animate);
        }

        // Handle Window Resize
        window.addEventListener('resize', function(){
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            initParticles();
        });

        // Start
        initParticles();
        animate();

    </script>
</body>
</html>
