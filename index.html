<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyber-Card Creator</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;800&family=Orbitron:wght@700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #050505;
            --panel: #111;
            --text: #eee;
            --accent: #00f3ff;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Montserrat', sans-serif; }
        body { background: var(--bg); color: var(--text); display: flex; flex-direction: column; align-items: center; min-height: 100vh; padding: 20px; }

        h1 { margin-bottom: 20px; font-family: 'Orbitron', sans-serif; color: var(--accent); letter-spacing: 2px; }

        .main-container {
            display: flex;
            gap: 30px;
            background: var(--panel);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 0 30px rgba(0, 243, 255, 0.1);
            flex-wrap: wrap;
            justify-content: center;
        }

        /* CONTROLS SIDE */
        .controls {
            flex: 1;
            min-width: 300px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .input-group { display: flex; flex-direction: column; }
        label { margin-bottom: 5px; font-weight: bold; font-size: 0.9rem; color: #aaa; }
        textarea, input[type="text"] {
            background: #000; border: 1px solid #333; color: white; padding: 12px; border-radius: 8px; resize: none; outline: none;
        }
        textarea:focus, input:focus { border-color: var(--accent); }

        .theme-options { display: flex; gap: 10px; margin-top: 5px; }
        .theme-btn {
            flex: 1; padding: 10px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; color: white; transition: 0.2s; opacity: 0.7;
        }
        .theme-btn.active { opacity: 1; transform: scale(1.05); box-shadow: 0 0 15px rgba(255,255,255,0.2); }

        #btn-download {
            margin-top: 20px; padding: 15px; background: var(--accent); border: none; border-radius: 8px; color: #000; font-weight: 800; cursor: pointer; transition: 0.3s;
        }
        #btn-download:hover { box-shadow: 0 0 20px var(--accent); }

        /* CANVAS SIDE */
        .canvas-container {
            display: flex; justify-content: center; align-items: center;
        }
        canvas {
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            border: 1px solid #333;
            max-width: 100%; /* Responsive */
        }
    </style>
</head>
<body>

    <h1>CYBER-CARD CREATOR</h1>

    <div class="main-container">
        <div class="controls">
            <div class="input-group">
                <label>YOUR MESSAGE</label>
                <textarea id="userText" rows="4" maxlength="100">THE FUTURE IS NOW.</textarea>
            </div>
            
            <div class="input-group">
                <label>FROM / BYLINE</label>
                <input type="text" id="userAuthor" value="- M. Davis" maxlength="20">
            </div>

            <div class="input-group">
                <label>SELECT VIBE</label>
                <div class="theme-options">
                    <button class="theme-btn active" style="background: linear-gradient(45deg, #00f3ff, #ff0050)" onclick="setTheme('neon')">NEON</button>
                    <button class="theme-btn" style="background: linear-gradient(45deg, #ff9900, #ff0050)" onclick="setTheme('sunset')">SUNSET</button>
                    <button class="theme-btn" style="background: linear-gradient(45deg, #00ff00, #003300)" onclick="setTheme('matrix')">MATRIX</button>
                </div>
            </div>

            <button id="btn-download" onclick="downloadCard()">DOWNLOAD CARD â¬‡</button>
        </div>

        <div class="canvas-container">
            <canvas id="cardCanvas" width="500" height="500"></canvas>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('cardCanvas');
        const ctx = canvas.getContext('2d');
        const textInput = document.getElementById('userText');
        const authorInput = document.getElementById('userAuthor');
        let currentTheme = 'neon';

        // Theme Definitions
        const themes = {
            neon: {
                bg1: '#000000', bg2: '#1a001a',
                primary: '#00f3ff', secondary: '#ff0050',
                font: 'Orbitron', glow: 20
            },
            sunset: {
                bg1: '#2b0000', bg2: '#3d003d',
                primary: '#ffcc00', secondary: '#ff3300',
                font: 'Montserrat', glow: 15
            },
            matrix: {
                bg1: '#001100', bg2: '#000000',
                primary: '#00ff00', secondary: '#003300',
                font: 'Courier New', glow: 10
            }
        };

        // Event Listeners for live updates
        textInput.addEventListener('input', drawCard);
        authorInput.addEventListener('input', drawCard);

        function setTheme(themeName) {
            currentTheme = themeName;
            // Update active button visuals
            document.querySelectorAll('.theme-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            drawCard();
        }

        // Helper function to wrap text so it fits on the card
        function wrapText(context, text, x, y, maxWidth, lineHeight) {
            const words = text.split(' ');
            let line = '';
            let lines = [];

            for(let n = 0; n < words.length; n++) {
                let testLine = line + words[n] + ' ';
                let metrics = context.measureText(testLine);
                let testWidth = metrics.width;
                if (testWidth > maxWidth && n > 0) {
                    lines.push(line);
                    line = words[n] + ' ';
                } else {
                    line = testLine;
                }
            }
            lines.push(line);

            // Draw the lines centered vertically
            let startY = y - ((lines.length - 1) * lineHeight) / 2;
            for(let k = 0; k < lines.length; k++) {
                context.fillText(lines[k], x, startY + (k * lineHeight));
                // Optional: Stroke for better readability
                context.strokeText(lines[k], x, startY + (k * lineHeight));
            }
        }


        function drawCard() {
            const theme = themes[currentTheme];
            const w = canvas.width;
            const h = canvas.height;
            const msg = textInput.value.toUpperCase();
            const author = authorInput.value;

            // 1. Clear Canvas
            ctx.clearRect(0, 0, w, h);

            // 2. Draw Background Gradient
            const grd = ctx.createLinearGradient(0, 0, w, h);
            grd.addColorStop(0, theme.bg1);
            grd.addColorStop(1, theme.bg2);
            ctx.fillStyle = grd;
            ctx.fillRect(0, 0, w, h);

            // 3. Draw Decorative Border
            ctx.lineWidth = 5;
            ctx.strokeStyle = theme.primary;
            ctx.shadowColor = theme.primary;
            ctx.shadowBlur = theme.glow;
            ctx.strokeRect(20, 20, w - 40, h - 40);
            ctx.shadowBlur = 0; // Reset shadow for regular drawing

            // 4. Draw Main Text
            ctx.fillStyle = '#ffffff';
            ctx.strokeStyle = theme.secondary;
            ctx.lineWidth = 2;
            ctx.font = `800 40px ${theme.font}, sans-serif`;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            
            // Add glow effect to text
            ctx.shadowColor = theme.primary;
            ctx.shadowBlur = theme.glow + 10;
            
            wrapText(ctx, msg, w / 2, h / 2 - 20, w - 80, 50);

            // 5. Draw Author Text
            ctx.shadowBlur = 0; // Less glow for author
            ctx.fillStyle = theme.primary;
            ctx.font = `400 20px Montserrat, sans-serif`;
            ctx.fillText(author, w / 2, h - 60);
        }

        function downloadCard() {
            // Convert canvas to image data URL
            const image = canvas.toDataURL("image/png");
            
            // Create temporary link to trigger download
            const link = document.createElement('a');
            link.download = 'cyber-card.png';
            link.href = image;
            link.click();
        }

        // Initial draw on load (wait for fonts)
        window.onload = function() {
             setTimeout(drawCard, 500); // Small delay to ensure Google Fonts loaded
        };

    </script>
</body>
</html>
