<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Junior Connections Infinite</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&display=swap');

        body {
            font-family: 'Fredoka', sans-serif;
            background-color: #E0F7FA;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            user-select: none;
        }

        h1 {
            color: #006064;
            font-size: 2.5rem;
            margin: 10px 0;
            text-align: center;
            text-shadow: 2px 2px #4DD0E1;
        }

        .instructions {
            font-size: 1.1rem;
            margin-bottom: 20px;
            color: #00838F;
            text-align: center;
        }

        .game-board {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
            max-width: 600px;
            width: 100%;
        }

        .tile {
            background-color: white;
            border: 4px solid #B2EBF2;
            border-radius: 12px;
            padding: 10px 2px;
            font-size: 0.85rem; 
            font-weight: 600;
            cursor: pointer;
            text-align: center;
            transition: transform 0.1s, background-color 0.2s;
            color: #333;
            box-shadow: 0 4px #80DEEA;
            text-transform: uppercase;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 55px;
            word-wrap: break-word;
        }

        /* Mobile adjustments */
        @media (max-width: 500px) {
            .tile { font-size: 0.7rem; min-height: 50px; }
            h1 { font-size: 2rem; }
        }

        .tile:active {
            transform: translateY(4px);
            box-shadow: 0 0 #80DEEA;
        }

        .tile.selected {
            background-color: #26C6DA;
            color: white;
            border-color: #0097A7;
            box-shadow: 0 4px #006064;
            transform: translateY(-2px);
        }

        .tile.solved {
            cursor: default;
            transform: none;
            box-shadow: none;
            color: white;
            border: none;
            animation: popIn 0.3s ease-out;
        }

        @keyframes popIn {
            0% { transform: scale(0.8); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        /* Controls */
        .controls {
            margin-top: 25px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }

        button.action-btn {
            background-color: #FF7043;
            color: white;
            border: none;
            padding: 12px 20px;
            font-size: 1rem;
            border-radius: 50px;
            cursor: pointer;
            font-family: 'Fredoka', sans-serif;
            box-shadow: 0 4px #D84315;
            transition: filter 0.2s;
            min-width: 100px;
        }
        
        button.action-btn:hover { filter: brightness(1.1); }
        button.action-btn:active { transform: translateY(4px); box-shadow: none; }

        /* Different colors for different buttons */
        button.submit-btn { background-color: #FF7043; box-shadow: 0 4px #D84315; }
        button.clear-btn { background-color: #78909C; box-shadow: 0 4px #455A64; }
        
        /* The NEW Puzzle Button Style */
        button.new-game-btn { 
            background-color: #7E57C2; 
            box-shadow: 0 4px #512DA8;
        }

        #message {
            margin-top: 15px;
            height: 25px;
            font-weight: bold;
            font-size: 1.2rem;
            color: #D84315;
            text-align: center;
        }

        /* Solved Group Colors */
        .group-0 { background-color: #FBC02D; color: #3E2723; } /* Yellow */
        .group-1 { background-color: #66BB6A; } /* Green */
        .group-2 { background-color: #42A5F5; } /* Blue */
        .group-3 { background-color: #AB47BC; } /* Purple */

    </style>
</head>
<body>

    <h1>ðŸ§© Junior Match</h1>
    <div class="instructions">Find 4 groups of 4 words!</div>

    <div id="game-board" class="game-board"></div>

    <div id="message"></div>

    <div class="controls">
        <button class="action-btn submit-btn" onclick="checkSelection()">Submit</button>
        <button class="action-btn clear-btn" onclick="deselectAll()">Clear</button>
        <button class="action-btn new-game-btn" onclick="confirmNewGame()">New Puzzle ðŸ”„</button>
    </div>

<script>
    // --- THE BIG DATABASE OF WORDS ---
    const database = [
        { theme: "Playground", words: ["SLIDE", "SWING", "SANDBOX", "SEESAW"] },
        { theme: "School Subjects", words: ["MATH", "SCIENCE", "ART", "MUSIC"] },
        { theme: "Pizza Toppings", words: ["CHEESE", "PEPPERONI", "MUSHROOM", "SAUSAGE"] },
        { theme: "___ Ball", words: ["BASE", "BASKET", "FOOT", "SNOW"] },
        { theme: "Pets", words: ["DOG", "CAT", "HAMSTER", "GOLDFISH"] },
        { theme: "Fruits", words: ["APPLE", "BANANA", "GRAPE", "ORANGE"] },
        { theme: "Colors", words: ["RED", "BLUE", "GREEN", "YELLOW"] },
        { theme: "Disney Characters", words: ["MICKEY", "MINNIE", "DONALD", "GOOFY"] },
        { theme: "Frozen (Movie)", words: ["ELSA", "ANNA", "OLAF", "SVEN"] },
        { theme: "Minecraft", words: ["DIRT", "WOOD", "STONE", "DIAMOND"] },
        { theme: "Superheroes", words: ["BATMAN", "HULK", "SPIDERMAN", "THOR"] },
        { theme: "Farm Animals", words: ["COW", "PIG", "CHICKEN", "SHEEP"] },
        { theme: "Ocean Life", words: ["SHARK", "WHALE", "CRAB", "OCTOPUS"] },
        { theme: "Weather", words: ["RAIN", "SNOW", "SUN", "WIND"] },
        { theme: "Furniture", words: ["CHAIR", "TABLE", "BED", "SOFA"] },
        { theme: "Cutlery", words: ["FORK", "SPOON", "KNIFE", "PLATE"] },
        { theme: "Sports", words: ["SOCCER", "TENNIS", "GOLF", "HOCKEY"] },
        { theme: "Body Parts", words: ["HAND", "FOOT", "HEAD", "NOSE"] },
        { theme: "Vehicles", words: ["CAR", "BUS", "TRUCK", "BIKE"] },
        { theme: "Ice Cream Flavors", words: ["VANILLA", "CHOCOLATE", "STRAWBERRY", "MINT"] },
        { theme: "Solar System", words: ["EARTH", "MARS", "VENUS", "JUPITER"] },
        { theme: "Clothing", words: ["SHIRT", "PANTS", "HAT", "SHOE"] },
        { theme: "Spongebob", words: ["SPONGEBOB", "PATRICK", "SANDY", "MR KRABS"] },
        { theme: "Harry Potter", words: ["HARRY", "RON", "HERMIONE", "HAGRID"] },
        { theme: "In the Sky", words: ["CLOUD", "BIRD", "PLANE", "KITE"] }
    ];

    const board = document.getElementById('game-board');
    const msg = document.getElementById('message');
    
    let currentGroups = [];
    let selectedTiles = [];
    let solvedCount = 0;

    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    function initGame() {
        // Reset state
        board.innerHTML = '';
        msg.innerText = '';
        selectedTiles = [];
        solvedCount = 0;

        // 1. Shuffle and pick 4 themes
        const shuffledDB = shuffleArray([...database]);
        const selectedCategories = shuffledDB.slice(0, 4);

        // 2. Assign IDs
        currentGroups = selectedCategories.map((group, index) => {
            return { ...group, id: index };
        });

        // 3. Flatten words
        let gameWords = [];
        currentGroups.forEach(g => {
            g.words.forEach(w => {
                gameWords.push({ word: w, groupId: g.id, theme: g.theme });
            });
        });

        // 4. Shuffle board words
        gameWords = shuffleArray(gameWords);

        // 5. Render
        gameWords.forEach((item) => {
            const tile = document.createElement('div');
            tile.classList.add('tile');
            tile.innerText = item.word;
            tile.dataset.groupId = item.groupId;
            
            tile.onclick = () => toggleTile(tile);
            board.appendChild(tile);
        });
    }

    // Safety check so kids don't accidentally reset a good game
    function confirmNewGame() {
        if(solvedCount > 0 && solvedCount < 4) {
            if(!confirm("Start a new puzzle? You will lose your current game!")) return;
        }
        initGame();
    }

    function toggleTile(tile) {
        if (tile.classList.contains('solved')) return;

        if (selectedTiles.includes(tile)) {
            tile.classList.remove('selected');
            selectedTiles = selectedTiles.filter(t => t !== tile);
        } else {
            if (selectedTiles.length < 4) {
                tile.classList.add('selected');
                selectedTiles.push(tile);
            }
        }
    }

    function checkSelection() {
        if (selectedTiles.length !== 4) {
            msg.innerText = "Pick 4 words first!";
            setTimeout(() => { if(msg.innerText.includes("Pick")) msg.innerText = ""; }, 2000);
            return;
        }

        const firstId = selectedTiles[0].dataset.groupId;
        const isMatch = selectedTiles.every(tile => tile.dataset.groupId === firstId);

        if (isMatch) {
            const themeName = currentGroups.find(g => g.id == firstId).theme;
            msg.innerText = "Correct! " + themeName;
            msg.style.color = "#2E7D32";
            
            selectedTiles.forEach(tile => {
                tile.classList.remove('selected');
                tile.classList.add('solved', `group-${firstId}`);
            });
            
            selectedTiles = [];
            solvedCount++;
            
            if (solvedCount === 4) {
                setTimeout(() => msg.innerText = "ðŸŽ‰ YOU WON! ðŸŽ‰", 500);
            }
        } else {
            msg.innerText = "Try again!";
            msg.style.color = "#D84315";
            
            selectedTiles.forEach(tile => {
                tile.style.backgroundColor = "#FFCDD2";
                setTimeout(() => {
                    tile.classList.remove('selected');
                    tile.style.backgroundColor = "";
                }, 500);
            });
            selectedTiles = [];
        }
    }

    function deselectAll() {
        selectedTiles.forEach(tile => tile.classList.remove('selected'));
        selectedTiles = [];
    }

    initGame();

</script>

</body>
</html>
