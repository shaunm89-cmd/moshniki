<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mila's Koala World & Game Center</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;900&display=swap" rel="stylesheet">

    <style>
        :root {
            /* DAY THEME */
            --bg: #E0F7FA;
            --text: #2c3e50;
            --card-bg: rgba(255, 255, 255, 0.8);
            --koala-grey: #9FA8DA;
            --koala-dark: #7986CB;
            --leaf: #66BB6A;
            --accent: #FF7043;
            --game-bg: #81D4FA;
            --shadow: rgba(0,0,0,0.1);
        }

        [data-theme="night"] {
            /* NIGHT THEME */
            --bg: #263238;
            --text: #ECEFF1;
            --card-bg: rgba(55, 71, 79, 0.9);
            --koala-grey: #5C6BC0;
            --koala-dark: #3949AB;
            --leaf: #2E7D32;
            --accent: #FFAB91;
            --game-bg: #1a2327;
            --shadow: rgba(0,0,0,0.4);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; cursor: none; }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            transition: background 0.5s ease, color 0.5s ease;
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* --- CUSTOM CURSOR --- */
        #cursor {
            position: fixed;
            top: 0; left: 0;
            width: 40px; height: 40px;
            pointer-events: none;
            z-index: 9999;
            font-size: 2rem;
            transform: translate(-50%, -50%);
            transition: transform 0.05s linear;
            filter: drop-shadow(0 5px 5px rgba(0,0,0,0.2));
        }

        /* --- NAV --- */
        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 2rem 5%;
            position: relative;
            z-index: 10;
        }

        h1 { font-weight: 900; font-size: 2.5rem; color: var(--koala-dark); }

        .toggle-btn {
            background: var(--card-bg);
            border: 2px solid var(--koala-dark);
            padding: 10px 20px;
            border-radius: 50px;
            font-weight: bold;
            color: var(--text);
            box-shadow: 0 5px 0 var(--koala-dark);
            transition: 0.2s;
            cursor: none;
        }
        .toggle-btn:active { transform: translateY(5px); box-shadow: 0 0 0; }

        /* --- SECTION 1: INTERACTIVE KOALA FACE --- */
        .hero-section {
            height: 50vh;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .koala-head {
            width: 300px;
            height: 260px;
            background: var(--koala-grey);
            border-radius: 140px;
            position: relative;
            box-shadow: 0 20px 0 var(--shadow);
            transition: transform 0.2s;
        }

        .ear {
            width: 100px; height: 100px;
            background: var(--koala-grey);
            border-radius: 50%;
            position: absolute;
            top: 0; z-index: -1;
            border: 8px solid var(--bg);
            transition: border-color 0.5s;
        }
        .ear.left { left: -40px; }
        .ear.right { right: -40px; }
        
        .ear::after {
            content: ''; position: absolute;
            width: 60%; height: 60%;
            background: white; opacity: 0.3;
            border-radius: 50%; top: 20%; left: 20%;
        }

        .eyes {
            display: flex; justify-content: space-between;
            width: 160px; position: absolute;
            top: 80px; left: 50%; transform: translateX(-50%);
        }

        .eye {
            width: 50px; height: 50px;
            background: white; border-radius: 50%;
            position: relative; overflow: hidden;
            box-shadow: inset 0 5px 10px rgba(0,0,0,0.2);
        }

        .pupil {
            width: 25px; height: 25px;
            background: #2c3e50; border-radius: 50%;
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%);
        }

        .nose {
            width: 90px; height: 120px;
            background: #2c3e50;
            border-radius: 40px 40px 60px 60px;
            position: absolute; top: 100px; left: 50%;
            transform: translateX(-50%);
            box-shadow: 0 10px 0 rgba(0,0,0,0.1);
            transition: 0.1s;
        }
        .nose:active { transform: translateX(-50%) scale(0.9); }
        .nose::after {
            content: ''; width: 30px; height: 15px;
            background: rgba(255,255,255,0.2);
            border-radius: 20px;
            position: absolute; top: 20px; left: 20px;
        }

        .boop-text {
            position: absolute; top: -60px; left: 50%;
            transform: translateX(-50%);
            background: var(--accent); color: white;
            padding: 10px 20px; border-radius: 20px;
            font-weight: bold; opacity: 0; transition: 0.3s;
            white-space: nowrap;
        }
        .boop-active { animation: popUp 0.5s ease forwards; }
        @keyframes popUp {
            0% { transform: translateX(-50%) scale(0); opacity: 0; }
            50% { transform: translateX(-50%) scale(1.2); opacity: 1; }
            100% { transform: translateX(-50%) scale(1); opacity: 0; }
        }

        /* --- SECTION 2: THE GAME --- */
        .game-wrapper {
            background: var(--card-bg);
            margin: 2rem 5%;
            border-radius: 30px;
            padding: 2rem;
            text-align: center;
            border: 4px solid var(--koala-dark);
            box-shadow: 0 10px 0 rgba(0,0,0,0.1);
        }

        .game-header { margin-bottom: 1rem; }
        .game-score { font-size: 1.5rem; color: var(--accent); font-weight: 900; }

        canvas {
            background: var(--game-bg);
            border-radius: 20px;
            cursor: none; /* Hide cursor inside game */
            box-shadow: inset 0 0 20px rgba(0,0,0,0.2);
            max-width: 100%;
        }

        .btn-game {
            background: var(--leaf);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            font-size: 1.5rem;
            font-weight: bold;
            margin-top: 1rem;
            box-shadow: 0 5px 0 #2E7D32;
            transition: 0.2s;
        }
        .btn-game:active { transform: translateY(5px); box-shadow: none; }

        /* --- SECTION 3: READING & FUN --- */
        .reading-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            padding: 2rem 5%;
            margin-bottom: 50px;
        }

        .info-card {
            background: var(--card-bg);
            padding: 2rem;
            border-radius: 20px;
            border: 2px solid var(--koala-grey);
            box-shadow: 0 10px 20px var(--shadow);
            transition: transform 0.3s;
        }
        .info-card:hover { transform: translateY(-5px); }

        .story-box {
            height: 200px;
            overflow-y: scroll;
            background: rgba(255,255,255,0.5);
            padding: 1rem;
            border-radius: 10px;
            margin-top: 1rem;
            font-size: 1.1rem;
            line-height: 1.6;
        }

        .joke-btn {
            width: 100%;
            padding: 10px;
            background: var(--koala-dark);
            color: white;
            border: none;
            border-radius: 15px;
            margin-top: 10px;
            font-weight: bold;
        }
        
        #joke-display {
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-style: italic;
            font-weight: bold;
            color: var(--accent);
            margin-top: 1rem;
        }

        footer {
            text-align: center;
            padding: 2rem;
            color: var(--koala-dark);
            font-weight: bold;
        }

    </style>
</head>
<body>

    <div id="cursor">üåø</div>

    <nav>
        <h1>Mila's World</h1>
        <button class="toggle-btn" onclick="toggleTheme()">üåû / üåö Theme</button>
    </nav>

    <section class="hero-section">
        <div class="koala-head" id="koala">
            <div class="boop-text" id="boopMsg">Boop! +1</div>
            <div class="ear left"></div>
            <div class="ear right"></div>
            <div class="eyes">
                <div class="eye"><div class="pupil" id="pupil-left"></div></div>
                <div class="eye"><div class="pupil" id="pupil-right"></div></div>
            </div>
            <div class="nose" onclick="boopNose()"></div>
        </div>
    </section>

    <section class="game-wrapper">
        <div class="game-header">
            <h2>üéÆ Koala Catch!</h2>
            <p>Move your mouse to help the Koala catch the yummy leaves! Don't miss them!</p>
            <div class="game-score">Score: <span id="scoreDisplay">0</span></div>
        </div>
        
        <div style="position: relative;">
            <canvas id="gameCanvas" width="800" height="400"></canvas>
            <div id="startScreen" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center;">
                <button class="btn-game" onclick="startGame()">‚ñ∂ Play Game</button>
            </div>
        </div>
    </section>

    <section class="reading-section">
        
        <div class="info-card">
            <h3>üìñ Koko's Big Dream</h3>
            <div class="story-box">
                <p>Once upon a time, there was a little Koala named Koko. Koko lived in a very tall gum tree.</p>
                <p>One day, Koko looked up at the moon and said, "I want to touch the moon!"</p>
                <p>His mom smiled. "But Koko, koalas are climbers, not flyers!"</p>
                <p>So Koko climbed the very highest branch of the very highest tree. He stretched his paw out...</p>
                <p>He didn't touch the moon, but he caught a beautiful falling star! üåü</p>
                <p>Koko realized that even if you can't fly, climbing high is pretty cool too.</p>
                <p>THE END üê®üí§</p>
            </div>
        </div>

        <div class="info-card">
            <h3>üê® Did You Know?</h3>
            <ul style="list-style: none; text-align: left; padding: 10px;">
                <li style="margin-bottom: 10px;">üçÉ <strong>Fingerprints:</strong> Koalas have fingerprints just like humans!</li>
                <li style="margin-bottom: 10px;">üíß <strong>Name:</strong> "Koala" means "no drink" because they get water from leaves!</li>
                <li>üéí <strong>Pouch:</strong> A koala pouch opens at the bottom, not the top!</li>
            </ul>
        </div>

        <div class="info-card">
            <h3>üòÇ Koala Joke Box</h3>
            <div id="joke-display">Click the button for a laugh!</div>
            <button class="joke-btn" onclick="tellJoke()">Tell me a Joke!</button>
        </div>

    </section>

    <footer>
        <p>Made for Mila üíñ 2026</p>
    </footer>

    <script>
        // --- MOUSE TRACKING & CURSOR ---
        let mouseX = 0;
        let mouseY = 0;

        document.addEventListener('mousemove', (e) => {
            mouseX = e.clientX;
            mouseY = e.clientY;

            // Cursor
            const cursor = document.getElementById('cursor');
            cursor.style.left = mouseX + 'px';
            cursor.style.top = mouseY + 'px';

            // Eyes
            updateEyes(mouseX, mouseY);
        });

        function updateEyes(mx, my) {
            const pupils = [document.getElementById('pupil-left'), document.getElementById('pupil-right')];
            pupils.forEach(pupil => {
                const eye = pupil.parentElement;
                const rect = eye.getBoundingClientRect();
                const centerX = rect.left + rect.width / 2;
                const centerY = rect.top + rect.height / 2;
                
                const angle = Math.atan2(my - centerY, mx - centerX);
                const distance = Math.min(10, Math.hypot(mx - centerX, my - centerY) / 10);
                
                const moveX = Math.cos(angle) * distance;
                const moveY = Math.sin(angle) * distance;

                pupil.style.transform = `translate(calc(-50% + ${moveX}px), calc(-50% + ${moveY}px))`;
            });
        }

        // --- BOOP MECHANIC ---
        let boopCount = 0;
        function boopNose() {
            boopCount++;
            const msg = document.getElementById('boopMsg');
            const koala = document.getElementById('koala');
            
            msg.innerText = `Boop! Score: ${boopCount}`;
            msg.classList.remove('boop-active');
            void msg.offsetWidth;
            msg.classList.add('boop-active');

            koala.style.transform = "scale(0.95)";
            setTimeout(() => koala.style.transform = "scale(1)", 100);
            
            // Particles
            for(let i=0; i<5; i++) createParticle();
        }

        function createParticle() {
            const p = document.createElement('div');
            p.innerText = "üíñ";
            p.style.position = 'fixed';
            p.style.left = '50%';
            p.style.top = '30%';
            p.style.pointerEvents = 'none';
            p.style.transition = '1s ease-out';
            p.style.zIndex = 1000;
            document.body.appendChild(p);
            setTimeout(() => {
                p.style.transform = `translate(${(Math.random()-0.5)*200}px, ${(Math.random()-0.5)*200}px)`;
                p.style.opacity = 0;
            }, 10);
            setTimeout(() => p.remove(), 1000);
        }

        // --- THEME TOGGLE ---
        function toggleTheme() {
            const body = document.body;
            body.setAttribute('data-theme', body.getAttribute('data-theme') === 'night' ? 'day' : 'night');
        }

        // --- JOKE GENERATOR ---
        const jokes = [
            "Why did the koala get fired? Because he would only do the bear minimum!",
            "What is a koala's favorite drink? Coca-Koala!",
            "Why do koalas carry babies on their back? Because they can't push a stroller up a tree!",
            "What kind of bear has no teeth? A gummy bear (but koalas aren't bears!)"
        ];

        function tellJoke() {
            const display = document.getElementById('joke-display');
            const random = jokes[Math.floor(Math.random() * jokes.length)];
            display.innerText = random;
        }

        // --- GAME LOGIC (KOALA CATCH) ---
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        let gameActive = false;
        let score = 0;
        let items = [];
        let playerX = 400;

        // Player (Basket/Koala)
        function drawPlayer() {
            ctx.font = "50px Arial";
            ctx.textAlign = "center";
            ctx.fillText("üê®", playerX, 380);
        }

        function spawnItem() {
            items.push({
                x: Math.random() * 750 + 25,
                y: -50,
                speed: Math.random() * 2 + 2,
                emoji: Math.random() > 0.9 ? "üåü" : "üçÉ" // 10% chance for star
            });
        }

        function gameLoop() {
            if (!gameActive) return;

            // Clear Canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Update Player Position based on global mouseX relative to canvas
            const rect = canvas.getBoundingClientRect();
            if(mouseX > rect.left && mouseX < rect.right) {
                playerX = mouseX - rect.left;
            }

            // Draw Player
            drawPlayer();

            // Handle Items
            if (Math.random() < 0.02) spawnItem();

            for (let i = 0; i < items.length; i++) {
                let item = items[i];
                item.y += item.speed;

                // Draw Item
                ctx.font = "30px Arial";
                ctx.fillText(item.emoji, item.x, item.y);

                // Collision Detection
                // Player is at item.x +/- 25px, item.y is at 380 +/- 25px
                if (item.y > 350 && item.y < 390 && Math.abs(item.x - playerX) < 40) {
                    // Caught!
                    score += (item.emoji === "üåü" ? 5 : 1);
                    document.getElementById('scoreDisplay').innerText = score;
                    items.splice(i, 1);
                    i--;
                } else if (item.y > 420) {
                    // Missed
                    items.splice(i, 1);
                    i--;
                }
            }

            requestAnimationFrame(gameLoop);
        }

        function startGame() {
            document.getElementById('startScreen').style.display = 'none';
            gameActive = true;
            score = 0;
            items = [];
            document.getElementById('scoreDisplay').innerText = score;
            gameLoop();
        }

    </script>
</body>
</html>
